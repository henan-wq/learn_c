# 2.2 表达式

表达式是一系列运算和算子的组合，用来计算一个值

例如：

```
amount = x * (1 + 0.033) * (1 + 0.033) * (1 + 0.033);
total = 57;
count = count + 1;
value = (min / 2) * lastValue;
```

## 运算符

- 运算符（operator)是指进行运算的动作，比如加法运算符`+`,减法运算符`-`。
- 算子（operand）是指参与运算的值，这个值可能是常数，也可能是变量，还可能是一个方法的返回值。

`a = b + 5`a、b和5都是算子，`=`和`+`都是运算符。

## 计算时间差

输入两个时间，每个时间分别输入小时和分钟的值，然后输出两个时间之间的差，也以几小时几分表示：

```
int hour1, minute1;
int hour2, minute2;

scanf("%d %d", &hour1, &minute1);
scanf("%d %d", &hour2, &minute2);
```

以上的代码，如果用分别减的方法，会出现分钟借位的情况：1点40分和2点10分的差：`2-1=1小时，10分-40分=-30分`

更好的做法是：

```
int hour1, minute1;
int hour2, minute2;

scanf("%d %d", &hour1, &minute1);
scanf("%d %d", &hour2, &minute2);

int t1 = hour1 * 60 + minute1;
int t2 = hour2 * 60 + minute2;

int t = t2 - t1;

printf("时间差是%d小时%d分。", t/60, t%60);
```

将小时转换为分钟，做运算。然后在格式化字符串中y分别取整数的运算结果和余数的结果。

- `hour1 * 60 + minute1 ->转换分钟为单位`
- `t/60 -->小时部分;`
- `t%60 -->分钟`

## 运算符优先级

```
优先级		运算符		运算		结合关系		举例

1		+		单目不变	自右向左		a*+b
1		-		单目取负	自右向左		a*-b
2		*		乘		自左向右		a*b
2		/		除		自左向右		a/b
2		%		取余		自左向右		a%b
3		+		加		自左向右		a+b
3		-		减		自左向右		a-b
4		=		赋值		自右向左		a=b
```

**注意：在C语言中，`=`是一个运算符。但在其他的语言里`=`不一定是运算符。**

## 赋值运算符

- a赋值也是运算，也有结果
- `a=6`的结果是`a`被赋予的值，也就是6
- `a=b=6 --> a=(b=6)`

## “嵌入式赋值”

课程老师认为这样写程序不好，不要这么写：

```
int a = 6;
int b;
int c = 1+(b=a);
```

- 不利于阅读
- 容易产生错误

## 结合关系

- 一般自左向右
- 单目`+-`和赋值`=`自右向左

一些反面例子：

```
result = a = b = 3 + c;
result = 2;
result = (result = result * 2) * 6 * (result = 3 + result);
```

> 复杂的表达式不利于阅读和理解，容易造成读程序时的误解。要避免写出这样的复杂表达式。
这个表达式应该被拆成若干个表达式，然后以明显的正确的顺序来进行计算。


